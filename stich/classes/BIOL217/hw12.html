<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>hw12.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<!DOCTYPE html>
<head>
<!-- Favicon for various operating systems -->
<link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
<!-- <link rel="manifest" href="./favicon/site.webmanifest"> -->
<link rel="mask-icon" href="./favicon/safari-pinned-tab.svg" color="#603cba">
<link rel="shortcut icon" href="./favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#603cba">
<meta name="msapplication-config" content="./favicon/browserconfig.xml">
<meta name="theme-color" content="#382121">
</head>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="..\..\styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">BIOL 217</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Teaching
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../teaching.html">Teaching home</a>
    </li>
    <li>
      <a href="../../classes/BIOL217/index.html">BIOL 217</a>
    </li>
    <li>
      <a href="../../classes/BIOL678/index.html">BIOL 678</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../research.html">Research</a>
</li>
<li>
  <a href="../../studentProjects.html">Current Students</a>
</li>
<li>
  <a href="../../publications.html">Publications</a>
</li>
<li>
  <a href="../../cv.html">CV</a>
</li>
<li>
  <a href="../../contact.html">Contact</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/danStich">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<h1 id="multi">
Classification and regression trees (CART)
</h1>
<p><img src="../../images/water.jpg" alt=""></p>
<h2 id="multi">
Introduction
</h2>
<p>This week we will continue down the path of machine learning and exploratory/descriptive statistical tools by talking about <em>decision trees</em>, with a specific focus on classification and regression trees. In our discussions this week, and in our readings, we learned that CART can be complementary to many of the analyses we have done this semester. We also learned that this tool could very likely replace many of the techniques we have talked about this semester in studies for which we have complex datasets with large numbers of explanatory variables. But, the real power in this technique lies in the ability to identify emergent patterns in data that we might otherwise overlook given our limited ability to observe them, even with other powerful statistical tools. All of this, recall, comes with the added bonus that the technique is free of any kind of distributional assumptions, and it can handle missing data in both the response and the explanatory variables. This utility also extends into the realm of multivariate techniques with the development of multivariate trees in very recent years.</p>
<p>As discussed in class, classification trees tend to be slightly more complex than regression trees, and if you can interpret a classification tree you can interpret a regression tree. Furthermore, classification trees provide a nice alternative to complex categorical regression techniques (i.e multinomial logistic regression) and are naturally well suited for situations in which we might otherwise employ binomial logistic regression. For these reasons we restrict our treatment of CART to classification trees during the lecture this week. Now, we will work with regression trees for the lab.</p>
<p>By the end of this week, you should understand 1) why we use decision trees and what their limits are, 2) how to implement classification and regression trees in R (inluding how to diagnose overfitting and predictive ability), and 3) how to interpret the results of a fitted tree.</p>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<p>Let’s start with the data. The data this week come from a study that looked at effects of various local and landscape-scale factors on total phosphorus, total nitrogen, and nitrates within just under 350 lakes in Michigan.</p>
<p>The paper can be found <a href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0135454"> here</a>.</p>
<p>The full description of these data is posted on the course website <a href='../../data/water.pdf'>here</a> as the data set is extensive and we will only need to examine a few of these variables closely by the time we finish fitting our trees. For now, it might be helpful for you to know that variables 21 and 22 represent connectivity measurements and all variables 13:94 represent landscape variables at different scales. (Wow, that’s a lot of variables!!)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Read in the data set</span></a>
<a class="sourceLine" id="cb1-2" title="2">  water =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;water.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-3" title="3">  </a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Get a feel for the data structure:</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># Lots of numeric variables and a few factors</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co"># that will need to be removed</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="kw">str</span>(water)</a></code></pre></div>
<pre><code>&#39;data.frame&#39;:   346 obs. of  94 variables:
 $ NEW_KEY_CODE: Factor w/ 346 levels &quot;1_99&quot;,&quot;10_39&quot;,..: 293 221 223 3 10 11 15 17 18 27 ...
 $ Lake_Name   : Factor w/ 279 levels &quot;&quot;,&quot;Allen Lake&quot;,..: 78 178 167 108 111 263 74 246 30 231 ...
 $ LATITUDE    : num  46.1 43.6 45.4 41.8 42.3 ...
 $ LONGITUDE   : num  -86.3 -85.3 -87.8 -85.2 -85.2 ...
 $ EDU         : int  7 5 8 3 3 3 3 3 3 5 ...
 $ DR_COD2     : Factor w/ 3 levels &quot;DRST&quot;,&quot;DRSTLK&quot;,..: 2 2 2 3 3 3 3 3 3 3 ...
 $ LP          : Factor w/ 6 levels &quot;F&quot;,&quot;H&quot;,&quot;IH&quot;,&quot;IO&quot;,..: 1 1 6 5 2 2 2 5 2 5 ...
 $ AVGD_M      : num  6.6 3.2 3 5.9 5.3 5.8 4.6 6.06 12.3 11.3 ...
 $ MAXD_M      : num  16.8 11.9 12.5 14.9 20.1 ...
 $ TP          : num  5 6 13 11 16 8 15 51 12 8 ...
 $ ALK         : int  18 117 158 126 111 159 155 81 118 98 ...
 $ SEC         : num  5.33 2.13 3.35 2.74 3.35 ...
 $ CHLRD       : num  0.5 5 1.5 7.2 29 7.9 15.2 45 3.7 1.2 ...
 $ CHLA        : num  3 0 4.3 5.1 0.43 3 4.9 5.8 2.6 0.1 ...
 $ COLOR       : num  2 12 26 5 6.5 14 3 10 3 4 ...
 $ NITRATE     : int  1 20 10 50 0 7 260 13 20 5 ...
 $ TN          : num  302 191 514 781 588 708 912 976 395 366 ...
 $ LK_AREA_HA  : num  34.5 126.2 28.7 56.4 136.5 ...
 $ LCL_AREA_HA : num  113 164 145 123 682 ...
 $ NET_AREA_HA : num  360 4564 13705 NA NA ...
 $ UPDIST_NET  : num  0 22.5 84.6 NA NA ...
 $ UPDIST_LCL  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ URB_A       : num  36.7 57.9 19.4 58.6 84.9 ...
 $ AGR_A       : num  0 0 0 14.2 0 ...
 $ FOC_A       : num  0.234 0 26.534 0 0 ...
 $ FOD_A       : num  51 17.8 41.3 19.6 0 ...
 $ FOR_A       : num  51.2 17.8 67.9 19.6 0 ...
 $ WAT_A       : num  5.662 8.676 0.242 1.839 3.465 ...
 $ WEF_A       : num  0 2.43 0 0 6.28 ...
 $ WEE_A       : num  0 6.37 3.63 2.21 5.3 ...
 $ WET_A       : num  0 8.81 3.63 2.21 11.59 ...
 $ URB_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ AGR_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ FOC_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ FOD_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ FOR_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WAT_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WEF_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WEE_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WET_B       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ URB_C       : num  16.95 30.72 6.05 23.81 84.67 ...
 $ AGR_C       : num  0 0 0 62.56 0.31 ...
 $ FOC_C       : num  8.89 0 54.23 0 0 ...
 $ FOD_C       : num  56.925 49.445 35.634 10.229 0.902 ...
 $ FOR_C       : num  65.821 49.445 89.867 10.229 0.902 ...
 $ WAT_C       : num  2.549 3.862 0.045 0.649 1.121 ...
 $ WEF_C       : num  0 4.54 0 0 5.87 ...
 $ WEE_C       : num  2.46 3.84 1.05 1.43 5.55 ...
 $ WET_C       : num  2.46 8.38 1.05 1.43 11.42 ...
 $ URB_D       : num  12.03 31.56 3.93 22.7 79.92 ...
 $ AGR_D       : num  0 0 5.68 64.3 1.8 ...
 $ FOC_D       : num  7.29 0 57.97 0 0 ...
 $ FOD_D       : num  57.54 48.9 27.07 9.75 1.54 ...
 $ FOR_D       : num  64.82 48.9 85.05 9.75 1.54 ...
 $ WAT_D       : num  2.549 3.862 0.045 0.649 1.121 ...
 $ WEF_D       : num  0 4.54 0 0 3.56 ...
 $ WEE_D       : num  4.47 3.76 3.34 1.37 4.48 ...
 $ WET_D       : num  4.47 8.3 3.34 1.37 8.04 ...
 $ URB_E       : num  11.89 31.56 3.93 22.7 74.42 ...
 $ AGR_E       : num  0 0 5.68 64.3 6.95 ...
 $ FOC_E       : num  7.2 0 58 0 0 ...
 $ FOD_E       : num  57.14 48.9 27.07 9.75 3.5 ...
 $ FOR_E       : num  64.34 48.9 85.05 9.75 3.5 ...
 $ WAT_E       : num  2.519 3.862 0.045 0.649 0.903 ...
 $ WEF_E       : num  0 4.54 0 0 2.87 ...
 $ WEE_E       : num  4.42 3.76 3.34 1.37 3.61 ...
 $ WET_E       : num  4.42 8.3 3.34 1.37 6.48 ...
 $ URB_F       : num  11.89 31.56 3.93 22.7 69.39 ...
 $ AGR_F       : num  0 0 5.68 64.3 11.63 ...
 $ FOC_F       : num  7.2 0 58 0 0 ...
 $ FOD_F       : num  57.14 48.9 27.07 9.75 4.68 ...
 $ FOR_F       : num  64.34 48.9 85.05 9.75 4.68 ...
 $ WAT_F       : num  2.519 3.862 0.045 0.649 0.841 ...
 $ WEF_F       : num  0 4.54 0 0 2.67 ...
 $ WEE_F       : num  4.42 3.76 3.34 1.37 3.36 ...
 $ WET_F       : num  4.42 8.3 3.34 1.37 6.04 ...
 $ URB_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ AGR_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ FOC_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ FOD_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ FOR_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WAT_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WEF_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WEE_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ WET_G       : num  0 0 0 0 0 0 0 0 0 0 ...
 $ URB_H       : num  5.5 3.63 0.94 0 0 ...
 $ AGR_H       : num  0 34 10.5 0 0 ...
 $ FOC_H       : num  2.37 4.81 29.02 0 0 ...
 $ FOD_H       : num  60.8 41.9 47.7 0 0 ...
 $ FOR_H       : num  63.2 46.7 76.7 0 0 ...
 $ WAT_H       : num  13.14 1.75 1.19 0 0 ...
 $ WEF_H       : num  0 1.81 3.73 0 0 ...
 $ WEE_H       : num  5.17 1.1 1.04 0 0 ...
 $ WET_H       : num  5.17 2.9 4.77 0 0 ...</code></pre>
<p>There’s no real meaningful way for us to deal with a few of the variables in this study using CART. These include lake names, organizational codes within the dataset, and response variables that we are not going to concern ourselves with. So, let’s go ahead and remove those for now.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Remove the columns that we don&#39;t need</span></a>
<a class="sourceLine" id="cb3-2" title="2">  water =<span class="st"> </span>water[ , <span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>,<span class="dv">16</span>,<span class="dv">17</span>)]</a></code></pre></div>
<p>We’ve done this so it is easier for us to use the entire dataframe when we make the call to <code>rpart</code>. We’ll also get rid of species for now to make things a little easier to interpret. And, as long as we are at it, we need to cast all of the remaining variables in the dataframe as factors.</p>
<p>Before you go any further, set a seed for random processes in your script. The reason for this is that it will make your results reproduceable when I run your code. Pick any number you like. you can choose it from a random number generator if you like, but enter the reuslt in the ‘<code>set.seed</code>’ function, like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Enter a random number seed like like this:</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb4-3" title="3">  </a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># </span><span class="al">NOTE</span><span class="co">: your results won&#39;t match mine if you use this because I didn&#39;t set a</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co"># seed.  </span></a>
<a class="sourceLine" id="cb4-6" title="6">  </a></code></pre></div>
<p>Now that you have the data ready for analysis, start by fitting a tree to the data that is overfit (the response is <code>TP</code>). Don’t forget to load the <code>rpart</code> package if you haven’t done so already. Remember the point of doing this is that we want to grow a big tree so we can prune it back to a reasonable size. unfortunately we won’t know what that is until after we overfit the tree.</p>
<p>This is what my tree looked like. Now that is a tree we can prune!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># Take a quick look at the plot</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># Replace &#39;water.ot&#39; with the name of the tree that you built</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="kw">library</span>(rpart.plot)</a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="kw">prp</span>(water.ot)</a></code></pre></div>
<p><img src="hw12_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><em><strong>Question 1.</strong></em> Your tree may look slightly different from mine given that they are randomly generated. How many “<em>leaves</em>” are on your overfit tree? You can find this out by looking at <code>obj$frame</code> where <code>obj</code> is the name of your regression tree.</p>
<p><em><strong>Question 2.</strong></em> Using the <code>printcp</code> function, how many splits are in the model that minimizes cross validation error (‘<code>xerror</code>’)? What is the complexity parameter (cp) for this regression tree?</p>
<p>Now go back and fit a new tree corresponding to the cp that was in your answer to <em>question 2</em>. Plot the fitted tree with the ‘<code>prp</code>’ function, include the argument ‘<code>extra = 1</code>’ in your call.</p>
<p><em><strong>Question 3.</strong></em> Which of the explanatory variables are included in the new tree? Go back into the description of the data <a href='../../data/water.pdf'>here</a> to find out what the abbreviations stand for if you need to.</p>
<p>Just as we could calculate a misclassification rate for classification trees, we can also calculate an R-squared value for our training models for regression trees. To do this, we subtract the relative error for our tree at the final split from 1.00. You can get relative error using the <code>printcp</code> fuunction like you did above.</p>
<p><em><strong>Question 4</strong></em> How much variance is explained by your regression tree. Does this surprise you given the number of explanatory variables you had at your disposal?</p>
<p><em><strong>Question 5.</strong></em> How do the results of your <em>predictive model</em> compare to the findings of the <em>hypothesis testing</em> reported in the abstract of <a href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0135454">the paper</a>? Can you say anything about the directionality of the relationships that you have identified with your regression tree?</p>
<p><br></p>
</div>

<!DOCTYPE html>

<br>

<hr>

<p style="color:gray; text-align:center">This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/legalcode">Creative Commons Attribution 4.0 International License</a>. Data are provided for educational purposes only unless otherwise noted.</p>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
