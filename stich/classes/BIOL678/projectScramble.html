<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>projectScramble.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<!DOCTYPE html>
<head>
<!-- Favicon for various operating systems -->
<link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
<!-- <link rel="manifest" href="./favicon/site.webmanifest"> -->
<link rel="mask-icon" href="./favicon/safari-pinned-tab.svg" color="#603cba">
<link rel="shortcut icon" href="./favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#603cba">
<meta name="msapplication-config" content="./favicon/browserconfig.xml">
<meta name="theme-color" content="#382121">
</head>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="..\..\styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">BIOL 678</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Teaching
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../../teaching.html">Teaching home</a>
    </li>
    <li>
      <a href="../../classes/BIOL217/index.html">BIOL 217</a>
    </li>
    <li>
      <a href="../../classes/BIOL678/index.html">BIOL 678</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../research.html">Research</a>
</li>
<li>
  <a href="../../studentProjects.html">Current Students</a>
</li>
<li>
  <a href="../../publications.html">Publications</a>
</li>
<li>
  <a href="../../cv.html">CV</a>
</li>
<li>
  <a href="../../contact.html">Contact</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/danStich">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<h1>
<b> Project scramble </b>
</h1>
<p>This is an extra example to help you along with the homework example this week since it is your first time doing this.</p>
<p>The example comes from a board game called Scramble (or Perfection). It works like <a href="https://www.youtube.com/watch?v=pxjpVfE48PU"> this </a>. After <strong>mastering</strong> the game, one of my kids and I got bored, so we made up our own way to play. Because we could both get all of the pieces in our side before time ran out, we started betting on who would retain the most pieces on their side after time ran out and the board popped.</p>
<p>It didn’t take long before the kid accused me of having the easy side, so we designed an experiment to test the null hypothesis that the probability of retaining pieces was different between sides of the board.</p>
<p>We played the game again 10 times. Each time, we kept track of the number of pieces that popped out of the board from the starting total on each side (N = 18).</p>
<p>The data for the study look like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Read in the data in wide format</span></a>
<a class="sourceLine" id="cb1-2" title="2">  scramble &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;classData-master/projectScramble.csv&#39;</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Stack the data into long format and assign names to each side</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># of the board, adding the total number of starting pieces (18)</span></a>
<a class="sourceLine" id="cb1-6" title="6">  scram &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">stack</span>(scramble, <span class="kw">c</span>(<span class="st">&#39;green&#39;</span>, <span class="st">&#39;pink&#39;</span>)), <span class="dt">total=</span><span class="dv">18</span>)</a>
<a class="sourceLine" id="cb1-7" title="7">  </a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co"># Have a look-see:</span></a>
<a class="sourceLine" id="cb1-9" title="9">  scram</a></code></pre></div>
<pre><code>   values   ind total
1       2 green    18
2       7 green    18
3       2 green    18
4       4 green    18
5       4 green    18
6       6 green    18
7       4 green    18
8       2 green    18
9       3 green    18
10      6 green    18
11      3  pink    18
12      3  pink    18
13      4  pink    18
14      3  pink    18
15      4  pink    18
16      7  pink    18
17      8  pink    18
18      3  pink    18
19      3  pink    18
20      7  pink    18</code></pre>
<h2>
<b>Front-end needs</b>
</h2>
<p>Next, we’ll take care of some front-end needs by loading necessary libraries and creating some functions that will help us process our results.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Load necessary packages</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="kw">library</span>(R2jags)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># Create function to invert logit link function</span></a>
<a class="sourceLine" id="cb3-5" title="5">  inv.logit =<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="kw">exp</span>(x)<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">exp</span>(x))</a>
<a class="sourceLine" id="cb3-7" title="7">  }</a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co"># Make a function to get lower 95% credible limit with short name</span></a>
<a class="sourceLine" id="cb3-10" title="10">  low =<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="kw">quantile</span>(x, <span class="dt">probs=</span><span class="kw">c</span>(<span class="fl">0.025</span>))</a>
<a class="sourceLine" id="cb3-12" title="12">  }</a>
<a class="sourceLine" id="cb3-13" title="13"></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co"># Make a function to get upper 95% credible limit with short name</span></a>
<a class="sourceLine" id="cb3-15" title="15">  up =<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb3-16" title="16">    <span class="kw">quantile</span>(x, <span class="dt">probs=</span><span class="kw">c</span>(<span class="fl">0.975</span>))</a>
<a class="sourceLine" id="cb3-17" title="17">  }</a></code></pre></div>
<h2>
<b>Running the model</b>
</h2>
<p>Now, we need to write out our model in BUGS language so that JAGS can read it.</p>
<p>Here, we are assuming a binomial likelihood that uses a separate probability of success for each color (<code>green</code> or <code>pink</code>). This indexing is a little funky because we think of color as a character string or a factor. We will see below that we have to convert color to a number for the indexing to work in the likelihood.</p>
<p>Then, we define some priors for <code>p</code>. Here, we just loop over the number of colors and define the prior for each <code>p</code> using a beta density with parameters of <code>shape1 = 1</code> and <code>shape 2 = 1</code> to achieve a uniform (flat) density on the interval [0, 1].</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"> modelString =<span class="st"> &quot;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">    model{</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">      # Likelihood</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">        for(i in 1:N){</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">          Y[i] ~ dbinom(p[color[i]], n[i])</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">        }</span></a>
<a class="sourceLine" id="cb4-7" title="7"></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">      # Priors</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">      for(j in 1:ncolors){</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="st">        p[j] ~ dbeta(1, 1)</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="st">      }</span></a>
<a class="sourceLine" id="cb4-12" title="12"></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="st">      # Difference between colors</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="st">      diff &lt;- p[1] - p[2]</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="st">      </span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="st">    }&quot;</span></a></code></pre></div>
<p>Now, Package the data for JAGS</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">  vb_data =<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="dt">Y =</span> scram<span class="op">$</span>values,</a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="dt">n =</span> scram<span class="op">$</span>total,</a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="dt">N =</span> <span class="kw">nrow</span>(scram),</a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="dt">color=</span><span class="kw">as.numeric</span>(<span class="kw">as.factor</span>(scram<span class="op">$</span>ind)),</a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="dt">ncolors=</span><span class="kw">length</span>(<span class="kw">unique</span>(scram<span class="op">$</span>ind))</a>
<a class="sourceLine" id="cb5-7" title="7">  )</a></code></pre></div>
<p>Parameters monitored</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">  params =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;p&#39;</span>, <span class="st">&#39;diff&#39;</span>)</a></code></pre></div>
<p>Initial values for parameters. We need to give JAGS one initial guess for each of our p’s (one for green and one for pink).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">  inits &lt;-<span class="st"> </span><span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb7-2" title="2">    <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb7-3" title="3">      <span class="dt">p =</span> <span class="kw">rbeta</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-4" title="4">    )</a>
<a class="sourceLine" id="cb7-5" title="5">  }</a></code></pre></div>
<p>MCMC settings</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">  ni &lt;-<span class="st"> </span><span class="dv">50000</span>      <span class="co"># Number of draws from posterior (for each chain)</span></a>
<a class="sourceLine" id="cb8-2" title="2">  nt &lt;-<span class="st"> </span><span class="dv">5</span>          <span class="co"># Thinning rate</span></a>
<a class="sourceLine" id="cb8-3" title="3">  nb &lt;-<span class="st"> </span><span class="dv">25000</span>      <span class="co"># Number of draws to discard as burn-in</span></a>
<a class="sourceLine" id="cb8-4" title="4">  nc &lt;-<span class="st"> </span><span class="dv">3</span>          <span class="co"># Number of chains</span></a></code></pre></div>
<p>Call jags and run the model</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">  vb_mod &lt;-<span class="st"> </span><span class="kw">jags</span>(<span class="dt">data=</span>vb_data, <span class="dt">inits=</span>inits, params,</a>
<a class="sourceLine" id="cb9-2" title="2">                 <span class="kw">textConnection</span>(modelString),</a>
<a class="sourceLine" id="cb9-3" title="3">                 <span class="dt">n.chains =</span> nc, <span class="dt">n.thin =</span> nt,</a>
<a class="sourceLine" id="cb9-4" title="4">                 <span class="dt">n.iter =</span> ni, <span class="dt">n.burnin =</span> nb,</a>
<a class="sourceLine" id="cb9-5" title="5">                 <span class="dt">working.directory =</span> <span class="kw">getwd</span>())</a></code></pre></div>
<h2>
<b>Results</b>
</h2>
<p>Print a summary of the model and check yo diagnostics. Notice that we have <strong>two estimates</strong> of <code>p</code>: one for each color!</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">  <span class="kw">print</span>(vb_mod)</a>
<a class="sourceLine" id="cb10-2" title="2">Inference <span class="cf">for</span> Bugs model at <span class="st">&quot;4&quot;</span>, fit using jags,</a>
<a class="sourceLine" id="cb10-3" title="3"> <span class="dv">3</span> chains, each with <span class="dv">50000</span> <span class="kw">iterations</span> (first <span class="dv">25000</span> discarded), n.thin =<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb10-4" title="4"> n.sims =<span class="st"> </span><span class="dv">15000</span> iterations saved</a>
<a class="sourceLine" id="cb10-5" title="5">         mu.vect sd.vect   <span class="fl">2.5</span><span class="op">%    25%</span><span class="st">    </span><span class="dv">50</span><span class="op">%    75%</span><span class="st">  </span><span class="fl">97.5</span>%  Rhat n.eff</a>
<a class="sourceLine" id="cb10-6" title="6">diff      <span class="fl">-0.027</span>   <span class="fl">0.045</span> <span class="fl">-0.114</span> <span class="fl">-0.058</span> <span class="fl">-0.027</span>  <span class="fl">0.002</span>  <span class="fl">0.062</span> <span class="fl">1.001</span> <span class="dv">15000</span></a>
<a class="sourceLine" id="cb10-7" title="7">p[<span class="dv">1</span>]       <span class="fl">0.225</span>   <span class="fl">0.031</span>  <span class="fl">0.168</span>  <span class="fl">0.204</span>  <span class="fl">0.224</span>  <span class="fl">0.245</span>  <span class="fl">0.288</span> <span class="fl">1.001</span> <span class="dv">15000</span></a>
<a class="sourceLine" id="cb10-8" title="8">p[<span class="dv">2</span>]       <span class="fl">0.253</span>   <span class="fl">0.032</span>  <span class="fl">0.192</span>  <span class="fl">0.230</span>  <span class="fl">0.252</span>  <span class="fl">0.274</span>  <span class="fl">0.319</span> <span class="fl">1.001</span> <span class="dv">15000</span></a>
<a class="sourceLine" id="cb10-9" title="9">deviance  <span class="fl">81.326</span>   <span class="fl">1.999</span> <span class="fl">79.388</span> <span class="fl">79.908</span> <span class="fl">80.708</span> <span class="fl">82.078</span> <span class="fl">86.682</span> <span class="fl">1.001</span> <span class="dv">15000</span></a>
<a class="sourceLine" id="cb10-10" title="10"></a>
<a class="sourceLine" id="cb10-11" title="11">For each parameter, n.eff is a crude measure of effective sample size,</a>
<a class="sourceLine" id="cb10-12" title="12">and Rhat is the potential scale reduction <span class="kw">factor</span> (at convergence, <span class="dt">Rhat=</span><span class="dv">1</span>).</a>
<a class="sourceLine" id="cb10-13" title="13"></a>
<a class="sourceLine" id="cb10-14" title="14">DIC <span class="kw">info</span> (using the rule, <span class="dt">pD =</span> <span class="kw">var</span>(deviance)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-15" title="15">pD =<span class="st"> </span><span class="fl">2.0</span> and DIC =<span class="st"> </span><span class="fl">83.3</span></a>
<a class="sourceLine" id="cb10-16" title="16">DIC is an estimate of expected predictive <span class="kw">error</span> (lower deviance is better).</a></code></pre></div>
<p>Save the posteriors to new objects with short names</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">difference &lt;-<span class="st"> </span>vb_mod<span class="op">$</span>BUGSoutput<span class="op">$</span>sims.list<span class="op">$</span>diff</a>
<a class="sourceLine" id="cb11-2" title="2">green &lt;-<span class="st"> </span>vb_mod<span class="op">$</span>BUGSoutput<span class="op">$</span>sims.list<span class="op">$</span>p[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb11-3" title="3">pink &lt;-<span class="st"> </span>vb_mod<span class="op">$</span>BUGSoutput<span class="op">$</span>sims.list<span class="op">$</span>p[,<span class="dv">2</span>]</a></code></pre></div>
<p>Graph the difference between green and pink</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw">hist</span>(difference, <span class="dt">col=</span><span class="st">&#39;gray87&#39;</span>, <span class="dt">xlim=</span><span class="kw">c</span>(<span class="op">-</span>.<span class="dv">2</span>, <span class="fl">.2</span>), <span class="dt">axes=</span>F,</a>
<a class="sourceLine" id="cb12-3" title="3">     <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">3000</span>), <span class="dt">main=</span><span class="st">&#39;Project scramble&#39;</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">     <span class="dt">xlab=</span><span class="st">&#39;Difference (green-pink)&#39;</span>,</a>
<a class="sourceLine" id="cb12-5" title="5">     <span class="dt">border =</span> <span class="st">&#39;gray90&#39;</span>)</a>
<a class="sourceLine" id="cb12-6" title="6"><span class="kw">axis</span>(<span class="dv">1</span>, <span class="dt">pos=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb12-7" title="7"><span class="kw">axis</span>(<span class="dv">2</span>, <span class="dt">las=</span><span class="dv">2</span>, <span class="dt">pos=</span><span class="op">-</span>.<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-8" title="8"><span class="kw">abline</span>(<span class="dt">v=</span><span class="kw">mean</span>(difference), <span class="dt">col=</span><span class="st">&#39;blue&#39;</span>, <span class="dt">lty=</span><span class="dv">1</span>, <span class="dt">lwd=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-9" title="9"><span class="kw">abline</span>(<span class="dt">v=</span><span class="kw">quantile</span>(difference, <span class="kw">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>)),</a>
<a class="sourceLine" id="cb12-10" title="10">       <span class="dt">col=</span><span class="st">&#39;red&#39;</span>, <span class="dt">lty=</span><span class="dv">2</span>, <span class="dt">lwd=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="projectScramble_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>

<!DOCTYPE html>

<br>

<hr>

<p style="color:gray; text-align:center">This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/legalcode">Creative Commons Attribution 4.0 International License</a>. Data are provided for educational purposes only unless otherwise noted.</p>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
