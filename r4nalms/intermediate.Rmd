```{r, child="_styles.Rmd"}
```

<br>

---
title: "Intermediate R"
---

<img src="./images/roboshad.png" alt="">

<br>

## Introduction
Once we have a basic grasp on how R works, and how and where to find help, the learning process becomes a lot less painful, and we can start to build an appreciation for how convenient it is to have a script we can come back to again and again. To show off this convenience, and the power of R as a statistics program, we will spend the afternoon session walking through some applied analyses and spend a little more time with data visualization tools.

The plan for the afternoon is to introduce a subset of the Secchi Dip-In data to do a standard statistical analysis with individual data points from many lakes, and then switch back to data visualization tools to create some isopleths of physical parameters measured at multiple times and depths over time in a single lake using the Otsego Lake data from the morning session.

<br>

## Data overview and management
Before we ever get into a statistical analysis, it is always good practice to have a good, long look at the data we are working with to make sure everything makes sense, and to note issues that may rear their heads down the road.

Let's start by reading in the Secchi Dip-In data. This particular data set is a subset of the whole, and contains only those data that were collected in the state of Ohio.
```{r, eval=FALSE}
ohio <- read.csv('ohio.csv')
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
ohio <- read.csv('data/ohio.csv')
```

<br>

So, what are we working with here? Let's have a look.

Remember from the morning session that it might be useful to understand how R sees your data first and foremost. The most reliable method for doing this with dataframes is to look at the **structure** of your data using `str`.
```{r, eval=FALSE}
# Like this:
str(ohio)
```

<img src="./images/ohio.png" alt="">

<br>

Now that we have an idea of what the data set looks like, let's take a little closer look. First, there are a couple of things that we can do that will clean up our code down the road a little bit. Let's have a quick look at our column names again.

```{r}
names(ohio)
```

<br>

Most of these are nice and clean, but there are some things that happen when we read data into R from Excel files. One of the things that R does is to replace all spaces and special characters with periods (`.`). This can make things a little difficult to read when we write code. For example, the column that said `Secchi (m)` in our Excel spreadsheet now says `Secchi..m.`. This confusion is compounded by the fact that some programming languages and R functions rely on the `.` for special purposes.

We are not going to replace all of the names, because we are not going to work with all of the columns, but let's replace a couple of these that we are definitely going to use.

For now, let's change the names for `Secchi..m.` and for `County..Borough.Parrish.`. Remember that the result of `names(ohio)` is a vector, and that we can replace individual elements of that vector. We just need to know the index of the element we wish to replace. In this case, `Secchi..m.` is the 7th column of the dataframe `ohio`, and `County..Borough.Parrish.` is the 11th. 

Here is how it works:

```{r}
# First, we replace Secchi..m. with Secchi
names(ohio)[7] <- "Secchi"

# Next, we replace County..Borough.Parrish.
# with just County because we are working in a 
# single state in this case, not becuase we are
# County-centric :)
names(ohio)[11] <- "County"
```

<br>

Of course, we could always do this in one fell swoop:
```{r}
# Replace names of both at once
# because that is cooler than one
# at a time.
names(ohio)[c(7,11)] <- c('Secchi', 'County')
```

<br>

Notice that above, we need to put indices inside of a call to `c` (the concatenate function) because otherwise R tries to interpret these as row and column indices and the program will return an error.

<br>

## Data exploration
Now that we have had a quick look at our data, and we have made some changes for the sake of convenience, let's dig a little deeper. 

For this afternoon, we are going to use `Secchi` as our **response**, or **independent** variable to demonstrate some basic statistical techniques in R. Before we can do any actual statistics, though, it is good practice to scrutinize the data we intend to use.









<br>
